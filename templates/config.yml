#
#  Comaint Project
#  Copyright (C) 2023-2024 Dominique Parisot
# 
#  config.yml
# 
#  This program is free software: you can redistribute it and/or modify it under the terms of the 
#  GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or
#  (at your option) any later version.
# 
#  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied 
#  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
# 
#  You should have received a copy of the GNU General Public License
#  along with this program.  If not, see <https://www.gnu.org/licenses/>.
# 

name: "comaint"

attributes:
  backend_project_name: "Comaint API backend"
  backend_project_dir: "comaint-backend"
  backend_project_version: "0.0.2"
  backend_project_description: "API server of Comaint project"

  api_lib_project_name: "Comaint API libary project"
  api_lib_project_dir: "comaint-api-lib"
  api_lib_project_version: "0.0.1"
  api_lib_project_description: "Javascript libary to easily access Comain API"

  mpa_frontend_project_name: "Comaint Multi Page Application frontend"
  mpa_frontend_project_dir: "comaint-mpa-frontend"
  mpa_frontend_project_version: "0.0.1"
  mpa_frontend_project_description: "Multi page application frontend of Comaint project"

  spa_frontend_project_name: "Comaint Single Page Application frontend"
  spa_frontend_project_dir: "comaint-spa-frontend"
  spa_frontend_project_version: "0.0.1"
  spa_frontend_project_description: "Single page application frontend of Comaint project"
  spa_frontend_port: 9002

  database_name: "db_comaint"
  database_schema_version: "1"
  api_version: "v1"
  frontend-project : "comaint-frontend"
  compagny: "Comaint"
  company: "Comaint"
  conception: "Powimod"
  authors: "Dominique Parisot"
  copyright: "2023-2024"
  license: "GPL V3 or later"
  lang: "fr"
  website: "https://github.com/powimod/comaint"
  contact: "powimod@gmail.com"

  auth_object: "User"
  auth_table_name: "users"
  auth_ident_property: "email"
  auth_password_property: "password"
  auth_code_property: "validationCode"
  auth_lock_property: "accountLocked"
  auth_extra_field: 'company'
  auth_account_fields: 'firstname,lastname'

  root_object: 'Company'

objects:

  - name: "Offer"
    attributes:
      table_name: "offers"
    properties:
      - name: "id"
        type: "id"
      - name: "title"
        type: "string"
        minimum: 1
        maximum: 64
      - name: "description"
        type: "text"
        maximum: 256
      - name: "active"
        type: "boolean"
        default: true
      - name: "duration"
        type: "integer"
        default: 0
      - name: "price"
        type: "price"
        default: 0
      - name: "userLimit"
        type: "integer"
        default: 0
      - name: "equipmentLimit"
        type: "integer"
        default: 0
      - name: "articleLimit"
        type: "integer"
        default: 0
      - name: "interventionLimit"
        type: "integer"
        default: 0
      - name: "storageLimit"
        type: "integer"
        default: 0
    indexes:
      - name: "title"
        unique: true
        keys:
          - property : "title"

  - name: "Subscription"
    attributes:
      table_name: "subscriptions"
    properties:
      - name: "id"
        type: "id"
      - name: "startDate"
        type: "date"
      - name: "endDate"
        type: "date"
      - name: "status"
        type: "integer"
        minimum: 1
        maximum: 10
      - name: "price"
        type: "price"
    links:
      - name: "offer"
        target: "Offer"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "offer"
        unique: false
        keys:
          - link: "offer"
      - name: "company"
        unique: false
        keys:
          - link: "company"

  - name: "Company"
    attributes:
      table_name: "companies"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 64
      - name: "locked"
        type: "boolean"
        default: false 
      - name: "address"
        type: "text"
        default: ""
        maximum: 128
      - name: "city"
        type: "text"
        default: ""
        maximum: 64
      - name: "zipCode"
        type: "text"
        default: ""
        maximum: 16
      - name: "country"
        type: "text"
        default: ""
        maximum: 32
      - name: "logoUid"
        type: "image"
    links:
      - name: "manager"
        target: "Company"
        mandatory: false
    indexes:
      - name: "name"
        unique: true
        keys:
          - property : "name"

  - name: "User"
    attributes:
      table_name: "users"
    properties:
      - name: "id"
        type: "id"
      - name: "email"
        type: "email"
        minimum: 3
        maximum: 128
      - name: "password"
        type: "string"
        secret: true
        minimum: 8
        maximum: 70 # 61 is the minimum size of bcrypt hash
      - name: "firstname"
        type: "string"
        maximum: 30
      - name: "lastname"
        type: "string"
        maximum: 30
      - name: "accountLocked"
        type: "boolean"
        default: false
      - name : "validationCode"
        type: "integer"
        mandatory: false
        default: 10000
        minimum: 10000
        maximum: 99999
      - name: "phone"
        type: "string"
        mandatory: false
        default: ""
        maximum: 25
      - name: "active"
        type: "boolean"
        default: true
      - name: "lastUse"
        type: "datetime"
        mandatory: false
      - name: "administrator"
        type: "boolean"
        default: false
      - name: "stockRole"
        type: "integer"
        mandatory: false
        default: 0
        minimum: 0
        maximum: 4
      - name: "parkRole"
        type: "integer"
        mandatory: false
        default: 0
        minimum: 0
        maximum: 4
    links:
      - name: "company"
        target: "Company"
        mandatory: false
    indexes:
      - name: "email"
        unique: true
        keys:
          - property : "email"
      - name: "idx_company_lastname_firstname"
        unique: true
        keys:
          - link: "company"
          - property : "lastname"
          - property : "firstname"
      - name: "idx_company"
        unique: false
        keys:
          - link: "company"

  - name: "Token"
    attributes:
      table_name: "tokens"
    properties:
      - name: "id"
        type: "id"
      - name: "expires_at"
        type: "datetime"
    links:
      - name: "user"
        target: "User"
    indexes:
      - name: "idx_user"
        unique: false
        keys:
          - link: "user"

#====================== Localisation

  - name: "Unit"
    attributes:
      table_name: "units"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
      - name: "description"
        type: "string"
        mandatory: false
      - name: "address"
        type: "text"
        default: ""
        maximum: 128
      - name: "city"
        type: "text"
        default: ""
        maximum: 64
      - name: "zipCode"
        type: "text"
        default: ""
        maximum: 16
      - name: "country"
        type: "text"
        default: ""
        maximum: 32
      - name: "planUid"
        type: "image"
    links:
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_company_name"
        unique: true
        keys:
          - link: "company"
          - property : "name"

  - name: "Section"
    attributes:
      table_name: "sections"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
      - name: "xPos"
        type: "integer"
        default: -1
      - name: "yPos"
        type: "integer"
        default: -1
      - name: "xSize"
        type: "integer"
        default: -1
      - name: "ySize"
        type: "integer"
        default: -1
    links:
      - name: "unit"
        target: "Unit"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true 
    indexes:
      - name: "idx_unit_name"
        unique: true
        keys:
          - link : "unit"
          - property : "name"
 

#====================== Stock

  - name: "EquipmentFamily"
    attributes:
      table_name: "equipment_families"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
    links:
      - name: "company"
        target: "Company"
        mandatory: true 
    indexes:
      - name: "idx_company_name"
        keys:
          - link: "company"
          - property: "name"


  - name: "EquipmentType"
    attributes:
      table_name: "equipment_types"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
    links:
      - name : "equipmentFamily"
        target: "EquipmentFamily"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_equipmentfamily_name"
        unique: true
        keys:
          - link : "equipmentFamily"
          - property: "name"
 

  - name: "Equipment"
    attributes:
      table_name: "equipments"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 128
      - name: "description"
        type: "string"
        maximum: 256
        mandatory: false
      - name: "notes"
        type: "text"
        mandatory: false
        maximum: 255
      - name: "reference"
        type: "string"
        maximum: 32
        mandatory: false
      - name: "xPos"
        type: "integer"
        default: -1
      - name: "yPos"
        type: "integer"
        default: -1
      - name: "xSize"
        type: "integer"
        default: -1
      - name: "ySize"
        type: "integer"
        default: -1
      - name: "documents"
        type: "text"
        mandatory: false
    links:
      - name: "equipmentType"
        target: "EquipmentType"
        mandatory: true 
      - name: "section"
        target: "Section"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_equipmenttype_name"
        unique: true
        keys:
          - link : "equipmentType"
          - property: "name"
      - name: "section_name"
        unique: false
        keys:
          - link : "section"
          - property: "name"


#====================== Stock

  - name: "ArticleCategory"
    attributes:
      table_name: "article_categories"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
    links:
      - name: "company"
        target: "Company"
        mandatory: true 
    indexes:
      - name: "idx_company_name"
        keys:
          - link: "company"
          - property: "name"


  - name: "ArticleSubCategory"
    attributes:
      table_name: "article_subcategories"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
    links:
      - name : "category"
        target: "ArticleCategory"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_category_name"
        unique: true
        keys:
          - link : "category"
          - property: "name"
 

  - name: "Article"
    attributes:
      table_name: "articles"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 128
      - name: "description"
        type: "string"
        maximum: 256
        mandatory: false
      - name: "localisation"
        type: "string"
        maximum: 32
        mandatory: false
      - name: "reference"
        type: "string"
        maximum: 32
        mandatory: false
      - name: "stockQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "reservedQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "orderQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "minimumQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "quantityToOrder"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
    links:
      - name: "articleSubCategory"
        target: "ArticleSubCategory"
        mandatory: true 
      - name: "section"
        target: "Section"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_subcategory_name"
        unique: true
        keys:
          - link : "articleSubCategory"
          - property: "name"
      - name: "idx_section_name"
        unique: false
        keys:
          - link : "section"
          - property: "name"

#====================== Nomenclature

  - name: "Component"
    attributes:
      table_name: "components"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
    links:
      - name : "equipmentFamily"
        target: "EquipmentFamily"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_equipmentfamily_name"
        unique: true
        keys:
          - link : "equipmentFamily"
          - property: "name"


  - name: "Nomenclature"
    attributes:
      table_name: "nomenclatures"
    properties:
      - name: "id"
        type: "id"
      - name: "quantity"
        type: "integer"
        minimum: 1
        maximum: 127
        default: 1
    links:
      - name: "equipmentType"
        target: "EquipmentType"
        mandatory: true 
      - name: "article"
        target: "Article"
        mandatory: true 
      - name: "component"
        target: "Component"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_component_article"
        unique: true
        keys:
          - link : "component"
          - link : "article"
      - name: "idx_equipmenttype"
        unique: false
        keys:
          - link : "equipmentType"
      - name: "idx_component"
        unique: false
        keys:
          - link : "component"
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"

  - name: "Inventory"
    attributes:
      table_name: "inventories"
    properties:
      - name: "id"
        type: "id"
      - name: "date"
        type: "datetime"
      - name: "oldQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "newQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
      - name: "comment"
        type: "text"
        maximum: 96
    links:
      - name: "article"
        target: "Article"
        mandatory: true 
      - name: "user"
        target: "User"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"
      - name: "idx_user"
        unique: false
        keys:
          - link : "user"
 
#====================== WorkOrder 

  - name: "WorkOrder"
    attributes:
      table_name: "work_orders"
    properties:
      - name: "id"
        type: "id"
      - name: "status"
        type: "integer"
        minimum: 1
        maximum: 10
      - name: "description"
        type: "text"
        mandatory: true
        default: ""
      - name: "notes"
        type: "text"
        mandatory: false
        maximum: 255
      - name: "maintenanceType"
        type: "integer"
        minimum: 1 # preventive
        maximum: 2 # corrective
    links:
      - name: "equipment"
        target: "Equipment"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_equipment"
        unique: false
        keys:
          - link : "equipment"

  - name: "Assignation"
    attributes:
      table_name: "assignation"
    properties:
      - name: "id"
        type: "id"
    links:
      - name: "user"
        target: "User"
        mandatory: true
      - name: "workOrder"
        target: "WorkOrder"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_user_workorder"
        unique: true
        keys:
          - link : "user"
          - link : "workOrder"
      - name: "idx_user"
        unique: false
        keys:
          - link : "user"
      - name: "idx_workorder"
        unique: false
        keys:
          - link : "workOrder"
 
  - name: "ArticleToChange"
    attributes:
      table_name: "articles_to_change"
    properties:
      - name: "id"
        type: "id"
      - name: "quantity"
        type: "integer"
        minimum: 1
        maximum: 127
        default: 1
    links:
      - name: "workOrder"
        target: "WorkOrder"
        mandatory: true
      - name: "article"
        target: "Article"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_workorder_article"
        unique: true
        keys:
          - link : "workOrder"
          - link : "article"
      - name: "idx_workorder"
        unique: false
        keys:
          - link : "workOrder"
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"
 
#====================== Intervention 

  - name: "Intervention"
    attributes:
      table_name: "interventions"
    properties:
      - name: "id"
        type: "id"
      - name: "status"
        type: "integer"
        minimum: 1
        maximum: 10
      - name: "description"
        type: "text"
      - name: "notes"
        type: "text"
      - name: "maintenanceType"
        type: "integer"
        minimum: 1 # preventive
        maximum: 2 # corrective
      - name: "startDate"
        type: "datetime"
        mandatory: false
      - name: "endDate"
        type: "datetime"
        mandatory: false
    links:
      - name: "equipment"
        target: "Equipment"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_equipment"
        unique: false
        keys:
          - link : "equipment"

  - name: "Intervenant"
    attributes:
      table_name: "intervenant"
    properties:
      - name: "id"
        type: "id"
    links:
      - name: "user"
        target: "User"
        mandatory: true
      - name: "intervention"
        target: "Intervention"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_user_intervenant"
        unique: true
        keys:
          - link : "user"
          - link : "intervention"
      - name: "idx_user"
        unique: false
        keys:
          - link : "user"
      - name: "idx_intervenant"
        unique: false
        keys:
          - link : "user"
 
 
  - name: "ChangedArticle"
    attributes:
      table_name: "changed_articles"
    properties:
      - name: "id"
        type: "id"
      - name: "quantity"
        type: "integer"
        minimum: 1
        maximum: 127
        default: 1
    links:
      - name: "intervention"
        target: "Intervention"
        mandatory: true
      - name: "article"
        target: "Article"
        mandatory: true
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_intervention_article"
        unique: true
        keys:
          - link : "intervention"
          - link : "article"
      - name: "idx_intervention"
        unique: false
        keys:
          - link : "intervention"
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"



#====================== Suppliers / orders

  - name: "Supplier"
    attributes:
      table_name: "suppliers"
    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"
        minimum: 2
        maximum: 32
      - name: "website"
        type: "string"
        mandatory: false
      - name: "address"
        type: "text"
        mandatory: false
    links:
      - name: "company"
        target: "Company"
        mandatory: true 
    indexes:
      - name: "idx_company_name"
        keys:
          - link: "company"
          - property: "name"


  - name: "Catalog"
    attributes:
      table_name: "catalog"
    properties:
      - name: "id"
        type: "id"
      - name: "reference"
        type: "string"
        maximum: 32
        mandatory: false
      - name: "price"
        type: "price"
        mandatory: false
    links:
      - name: "supplier"
        target: "Supplier"
        mandatory: true 
      - name: "article"
        target: "Article"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_supplier_article"
        unique: true
        keys:
          - link : "supplier"
          - link : "article"
      - name: "idx_supplier"
        unique: false
        keys:
          - link : "supplier"
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"


  - name: "Order"
    attributes:
      table_name: "orders"
    properties:
      - name: "id"
        type: "id"
      - name: "status"
        type: "integer"
        minimum: 1
        maximum: 10
        mandatory: true
      - name: "date"
        type: "date"
        mandatory: true
      - name: "price"
        type: "price"
        mandatory: true 
      - name: "reference"
        type: "string"
        maximum: 32
        mandatory: false
    links:
      - name: "supplier"
        target: "Supplier"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_supplier_article"
        unique: false
        keys:
          - link : "supplier"


  - name: "OrderLine"
    attributes:
      table_name: "order_lines"
    properties:
      - name: "id"
        type: "id"
      - name: "price"
        type: "price"
        mandatory: false
      - name: "orderQuantity"
        type: "integer"
        minimum: 1
        maximum: 127
        default: 1
      - name: "receivedQuantity"
        type: "integer"
        minimum: 0
        maximum: 127
        default: 0
    links:
      - name: "order"
        target: "Order"
        mandatory: true 
      - name: "article"
        target: "Article"
        mandatory: true 
      - name: "company"
        target: "Company"
        mandatory: true
    indexes:
      - name: "idx_order_article"
        unique: true
        keys:
          - link : "order"
          - link : "article"
      - name: "idx_order"
        unique: false
        keys:
          - link : "order"
      - name: "idx_article"
        unique: false
        keys:
          - link : "article"



files:
  - scope:  "project"
    input:  "templates/init-db.sql.liquid"
    output: "output/init-db.sql"

    ########################### Backend 
    
  - scope:  "project"
    input:  "templates/api-backend/package.json.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/package.json"

  - scope:  "project"
    input:  "templates/api-backend/config.json.sample.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/config.json.sample"

  - scope:  "project"
    input:  "templates/api-backend/locales/translation-fr.json.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/locales/fr/translation.json"

  - scope:  "project"
    input:  "templates/api-backend/locales/translation-en.json.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/locales/en/translation.json"

  - scope:  "project"
    input:  "templates/api-backend/server.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/server.js"

  - scope:  "project"
    input:  "templates/api-backend/model.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/models/model.js"

  - scope:  "object"
    input:  "templates/api-backend/object-model.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/models/{{object.name | kebabCase }}-model.js"

  - scope:  "project"
    input:  "templates/api-backend/auth-model.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/models/auth-model.js"

  - scope:  "project"
    input:  "templates/api-backend/view.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/views/view.js"

  - scope:  "project"
    input:  "templates/api-backend/controller.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/routes/controller.js"

  - scope:  "object"
    input:  "templates/api-backend/object-routes.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/routes/{{object.name | kebabCase}}-routes.js"

  - scope:  "project"
    input:  "templates/api-backend/auth-routes.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/routes/auth-routes.js"

  - scope:  "project"
    input:  "templates/api-backend/util.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/util.js"

  - scope:  "object"
    input:  "templates/global/object-helper.cjs.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/src/objects/{{object.name | kebabCase }}-object-helper.cjs"


  - scope:  "project"
    input:  "templates/api-backend/test/selftest-config.json.sample.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/selftest-config.json.sample"

  - scope:  "project"
    input:  "templates/api-backend/test/test-util.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/helpers/util.js"

  - scope:  "project"
    input:  "templates/api-backend/test/account-helper.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/helpers/account.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-01-api.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-01-api.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-02-register.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-02-register.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-03-login.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-03-login.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-04-object-helper.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-04-object-helper.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-05-object-edit.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-05-object-edit.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-06-object-create.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-06-object-create.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-07-object-edit.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-07-object-edit.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-08-object-delete.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-08-object-delete.js"

  - scope:  "project"
    input:  "templates/api-backend/test/test-09-object-recursive-delete.js.liquid"
    output: "output/{{project.attributes.backend_project_dir}}/test/test-09-object-recursive-delete.js"

    ########################### API library
   
  - scope:  "project"
    input:  "templates/api-lib/api-tools.js.liquid"
    output: "output/{{project.attributes.api_lib_project_dir}}/src/api-tools.js"

  - scope:  "project"
    input:  "templates/api-lib/global-api.js.liquid"
    output: "output/{{project.attributes.api_lib_project_dir}}/src/global-api.js"

  - scope:  "project"
    input:  "templates/api-lib/auth-api.js.liquid"
    output: "output/{{project.attributes.api_lib_project_dir}}/src/auth-api.js"

  - scope:  "object"
    input:  "templates/api-lib/object-api.js.liquid"
    output: "output/{{project.attributes.api_lib_project_dir}}/src/{{object.name | kebabCase}}-api.js"

  - scope:  "object"
    input:  "templates/global/object-helper.mjs.liquid"
    output: "output/{{project.attributes.api_lib_project_dir}}/src/objects/{{object.name | kebabCase}}-object-helper.mjs"


    ########################### Multi Page frontend
      # MPA is disabled since API was rewrited from CommonJS to ECMA Script
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/package.json.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/package.json"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/config.json.sample.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/config.json.sample"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/server.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/server.js"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/view.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/view.js"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/controller.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/routes/controller.js"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/model.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/model.js"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/auth-routes.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/routes/auth-routes.js"
      #
      #  - scope:  "object"
      #    input:  "templates/mpa-frontend/object-routes.js.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/routes/{{object.name | kebabCase}}-routes.js"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/auth-login.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/auth-login.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/auth-logout.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/auth-logout.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/auth-register.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/auth-register.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/auth-registration-validation.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/auth-registration-validation.ejs"
      #
      #  - scope:  "object"
      #    input:  "templates/mpa-frontend/object-list.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/{{object.name | kebabCase}}-list.ejs"
      #
      #  - scope:  "object"
      #    input:  "templates/mpa-frontend/object-details.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/{{object.name | kebabCase}}-details.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/layout.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/layout.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/private-home.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/private-home.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/public-home.ejs.liquid"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/src/views/public-home.ejs"
      #
      #  - scope:  "project"
      #    input:  "templates/mpa-frontend/style.css"
      #    output: "output/{{project.attributes.mpa_frontend_project_dir}}/public/style.css"


    ########################### Single Page Frontend

  - scope:  "project"
    input:  "templates/spa-frontend/package.json.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/package.json"

  - scope:  "project"
    input:  "templates/spa-frontend/vite.config.js.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/vite.config.js"

  - scope:  "project"
    input:  "templates/spa-frontend/index.html.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/index.html"

  - scope:  "project"
    input:  "templates/spa-frontend/config.json.sample.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/config.json.sample"

  - scope:  "project"
    input:  "templates/spa-frontend/main.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/main.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/global.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/global.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/palette-icon.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/palette-icon.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/dialog.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/dialog.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/popup-menu.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/popup-menu.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/header.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/header.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/about.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/about.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/footer.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/footer.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/login-dialog.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/login-dialog.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/create-account-dialog.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/create-account-dialog.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/accessibility-dialog.scss.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/scss/accessibility-dialog.scss"

  - scope:  "project"
    input:  "templates/spa-frontend/i18n.js.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/i18n.js"

  - scope:  "project"
    input:  "templates/spa-frontend/main.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/main.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/router.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/router.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/locales/translation-en.json.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/locales/en/translation.json"

  - scope:  "project"
    input:  "templates/spa-frontend/locales/translation-fr.json.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/locales/fr/translation.json"

  - scope:  "project"
    input:  "templates/spa-frontend/content/gpl-v3-en.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/en/gpl-v3.txt"

  - scope:  "project"
    input:  "templates/spa-frontend/content/gpl-v3-fr.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/fr/gpl-v3.txt"

  - scope:  "project"
    input:  "templates/spa-frontend/content/home-fr.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/fr/home.txt"

  - scope:  "project"
    input:  "templates/spa-frontend/content/home-en.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/en/home.txt"

  - scope:  "project"
    input:  "templates/assets/terms-of-use-fr.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/fr/terms-of-use.txt"

  - scope:  "project"
    input:  "templates/assets/terms-of-use-en.txt"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/content/en/terms-of-use.txt"

  - scope:  "project"
    input:  "templates/assets/icon.svg"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/icon.svg"

  - scope:  "project"
    input:  "templates/assets/logo.svg"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/logo.svg"

      # TODO raw copy of file
      #  - scope:  "project"
      #    input:  "templates/assets/icons.png"
      #    output: "output/{{project.attributes.spa_frontend_project_dir}}/public/icons.png"

  - scope:  "project"
    input:  "templates/spa-frontend/app.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/App.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/account-context.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/AccountContext.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-error-page.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/ErrorPage.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-home.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/Home.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-privacy-policy.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/PrivacyPolicy.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-terms-of-use.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/TermsOfUse.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-about.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/About.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/container-contact-us.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/containers/ContactUs.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-popup-menu.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/PopupMenu.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-config.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/Config.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-content-loader.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/ContentLoader.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-palette-icon.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/PaletteIcon.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-header.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/Header.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-footer.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/Footer.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-login-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/LoginDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-logout-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/LogoutDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-create-account-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/CreateAccountDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-accessibility-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/AccessibilityDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/dialog/Dialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/confirm-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/dialog/ConfirmDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/message-dialog.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/dialog/MessageDialog.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/bubble-popup.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/dialog/BubblePopup.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/flash-popup-stack.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/dialog/FlashPopupStack.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-private-home-page-content.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/PrivateHomePageContent.jsx"

  - scope:  "project"
    input:  "templates/spa-frontend/component-public-home-page-content.jsx.liquid"
    output: "output/{{project.attributes.spa_frontend_project_dir}}/src/components/PublicHomePageContent.jsx"
