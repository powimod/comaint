name: "comaint"

attributes:
  - name: "backend_project_dir"
    value: "comaint-backend"
  - name: "backend_project_version"
    value: "0.0.1"
  - name: "backend_project_description"
    value: "API server of Commaint project"

  - name: "frontend-project"
    value: "comaint-frontend"

objects:
  - name: "user"
    attributes:
      - name: "pascal_name"
        value: "User"
      - name: "kebab_name"
        value: "user"
    properties:
      - name: "id"
        type: "id"
      - name: "email"
        type: "string"

  - name: "product"
    attributes:
      - name: "pascal_name"
        value: "Product"
      - name: "kebab_name"
        value: "product"

    properties:
      - name: "id"
        type: "id"
      - name: "name"
        type: "string"


files:
  - scope:  "project"
    input:  "config/backend/package.json"
    output: "output/{{project.attributes.backend_project_dir}}/package.json"

  - scope:  "project"
    input:  "config/backend/config.json.sample"
    output: "output/{{project.attributes.backend_project_dir}}/config.json.sample"

  - scope:  "project"
    input:  "config/backend/server.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/server.js"

    # TODO mettre Model.js en minuscule
  - scope:  "project"
    input:  "config/backend/Model.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/models/Model.js"

  - scope:  "object"
    input:  "config/backend/object-model.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/models/{{object.attributes.kebab_name}}-model.js"

  - scope:  "project"
    input:  "config/backend/view.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/views/view.js"

  - scope:  "project"
    input:  "config/backend/controller.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/routes/controller.js"

  - scope:  "object"
    input:  "config/backend/object-routes.js"
    output: "output/{{project.attributes.backend_project_dir}}/src/routes/{{object.attributes.kebab_name}}-routes.js"


